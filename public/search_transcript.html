<!DOCTYPE html>
<html lang="en">
<head>
    <title>Search Transcript</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        label, input { margin: 5px; padding: 5px; }
        button { padding: 8px 12px; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 10px; border: 1px solid #ddd; text-align: center; }
        th { background-color: #007bff; color: white; }
    </style>
    <script>
        async function fetchTranscript() {
            const rollNumber = document.getElementById("rollNumber").value.trim();
            if (!rollNumber) {
                alert("Please enter a roll number.");
                return;
            }

            const response = await fetch(`/transcript/${rollNumber}`);
            const transcript = await response.json();

            if (response.status === 404) {
                document.getElementById("result").innerHTML = "<p style='color: red;'>Transcript not found.</p>";
                return;
            }

            document.getElementById("result").innerHTML = `
                <h3>Student Transcript</h3>
                <table>
                    <tr><th>Name</th><td>${transcript.name}</td></tr>
                    <tr><th>Roll Number</th><td>${transcript.rollNumber}</td></tr>
                    <tr><th>Email</th><td>${transcript.email}</td></tr>
                    <tr><th>Year</th><td>${transcript.year}</td></tr>
                    <tr><th>SGPA (Semesters)</th><td>${transcript.sgpa.join(", ")}</td></tr>
                    <tr><th>CGPA</th><td>${transcript.cgpa.toFixed(2)}</td></tr>
                </table>
                <button onclick="window.print()">Print Transcript</button>
            `;
        }
    </script>
</head>
<body>
    <h2>Search Your Transcript</h2>
    <label for="rollNumber">Enter Roll Number:</label>
    <input type="text" id="rollNumber" placeholder="e.g. MCA202301">
    <button onclick="fetchTranscript()">Search</button>
    <div id="result"></div>
</body>
</html>
